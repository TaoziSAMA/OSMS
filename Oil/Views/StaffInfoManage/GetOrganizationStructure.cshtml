<div style="padding:20px;">
    <table id="table1" class="layui-table" lay-filter="table1"></table>
</div>
<script>
    var table;
    var index1 = window.Layindex + 1;
    layui.use('treetable', function () {
        table = layui.table;
        var treetable = layui.treetable;
        // 渲染表格
        var renderTable = function () {
            treetable.render({
                treeColIndex: 1,
                treeSpid: "079489AE-F194-45C0-9776-A7D53EE2B588",
                treeIdName: "Id",
                treePidName: "ParentId",
                treeDefaultClose: true,
                treeLinkage: false,
                elem: '#table1',
                url: '/StaffInfoManage/GetOrgOption',
                page: false,
                cols: [[
                    { field: 'Name', title: '机构名称' },
                    { field: 'Code', title: '代码' },
                    { field: 'Leve', title: '区域级别', width: 100, templet: function (d) { return GetLeve(d.Leve) } },
                    {
                        field: 'Id', title: '', align: 'center', templet: function (d) {
                            var button;
                            button = '<div>'
                            button += ' <a class="layui-btn layui-btn-sm" lay-event="select">选择</a>'
                            button += '</div> '
                            return button;
                        }
                    }
                ]],
            });
        };
        renderTable();
        //绑定菜单
        table.on('tool(table1)', function (obj) {
            var data = obj.data;
            if (obj.event === 'select') {
                $('#form :input[name=OrgID]').val(data.Id)
                $('#form :input[name=OrgName]').val(data.Name)
                layer.close(index1);
            }
        });
        ////监听工具条
        //table.on('checkbox(table1)', function (obj) {
        //    console.log(obj.data.id); //选中行的相关数据

        //});
    });
        //function getCheckLength() { //获取选中数目
        //    var checkStatus = table.checkStatus('table1')
        //    var data = checkStatus.data;
        //    return data.length;
        //}
        ////确认
        //function Ok()
        //{
        //    if (getCheckLength()==0) {
        //        layer.tips('未选择，无法保存', '#ok');
        //    }
        //    else if (getCheckLength() == 1) {
        //        var data = table.checkStatus('table1').data;
        //        $('#form :input[name=OrgID]').val(data[0].Id )
        //        $('#form :input[name=OrgName]').val(data[0].Name)
        //        layer.close(index1);
        //    }
        //    else if (getCheckLength()>1) {
        //        layer.alert('只能选择一个机构', '#ok');
        //    }
        //}
</script>